<!doctype html>
<html lang="en-GB">
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<meta name="color-scheme" content="dark light">
		<title>NUMPTi</title>
		<link rel="icon" href="./assets/favicon.svg" type="image/svg+xml">
		<link rel="stylesheet" href="./assets/styles.css">
	</head>
	<body>
		<main class="app" aria-label="NUMPTi">
			<section class="clock" aria-label="Current time">
				<canvas class="clock__canvas" id="clock-canvas" hidden></canvas>
				<div class="clock__time" id="clock-time">--:--:--</div>
				<div class="clock__alt" id="clock-alt" hidden></div>
				<div class="clock__meta" id="clock-meta"></div>
			</section>

			<section class="panel" aria-label="Options and converters">
				<div class="panel__section">
					<div class="panel__section-head">
						<h2 class="panel__title">Display</h2>
						<button type="button" class="btn btn--ghost btn--small" id="btn-about" aria-haspopup="dialog" aria-controls="dlg-about">How it works</button>
					</div>
					<div class="panel__row panel__row--grid">
						<label class="field">
							<span class="field__label">Format</span>
							<select class="field__input" id="sel-format">
								<option value="colon">Colon: HH:MM(:SS)</option>
								<option value="brackets" selected>Brackets: HH(MM)SS</option>
							</select>
						</label>
						<label class="field">
							<span class="field__label">Mode</span>
							<select class="field__input" id="sel-mode">
								<option value="digital" selected>Digital</option>
								<option value="analogue">Analogue</option>
							</select>
						</label>
					</div>
					<div class="panel__row">
						<label class="switch">
							<input type="checkbox" id="opt-show-seconds" checked>
							<span>Show seconds</span>
						</label>
					</div>
					<div class="panel__row">
						<label class="switch">
							<input type="checkbox" id="opt-show-overlap" checked>
							<span>Show overlap reading (minute 9)</span>
						</label>
					</div>
					<div class="panel__row">
						<label class="switch">
							<input type="checkbox" id="opt-prefer-crossover">
							<span>Prefer crossover label during overlap</span>
						</label>
					</div>
					<div class="panel__row panel__row--grid">
						<label class="switch">
							<input type="checkbox" id="opt-show-hour" checked>
							<span>Show hour</span>
						</label>
						<label class="switch">
							<input type="checkbox" id="opt-show-minute" checked>
							<span>Show minute</span>
						</label>
					</div>
				</div>

				<div class="panel__section">
					<h2 class="panel__title">Midsun (solar noon)</h2>
					<div class="panel__row">
						<button type="button" class="btn" id="btn-use-location">Use my location</button>
						<button type="button" class="btn btn--ghost" id="btn-clear-location">Clear</button>
					</div>
					<div class="panel__row panel__row--grid">
						<label class="field">
							<span class="field__label">Longitude (°)</span>
							<input class="field__input" id="in-longitude" inputmode="decimal" autocomplete="off" placeholder="e.g. -0.1278" aria-describedby="longitude-help">
						</label>
						<div class="field field--readonly">
							<span class="field__label">Midsun</span>
							<output class="field__output" id="out-midsun">—</output>
						</div>
					</div>
					<div class="panel__row">
						<div class="hint" id="longitude-help">Approximate solar noon based on longitude only (no equation of time / latitude).</div>
					</div>
					<div class="panel__row">
						<output class="status" id="out-location-status" aria-live="polite"></output>
					</div>
				</div>

				<div class="panel__section">
					<h2 class="panel__title">Converters</h2>

					<div class="panel__subsection">
						<h3 class="panel__subtitle">Unix time → decimal</h3>
						<div class="panel__row panel__row--grid">
							<label class="field">
								<span class="field__label">Unix value</span>
								<input class="field__input" id="in-unix" inputmode="numeric" autocomplete="off" placeholder="e.g. 1734768000">
							</label>
							<label class="field">
								<span class="field__label">Unit</span>
								<select class="field__input" id="sel-unix-unit">
									<option value="s" selected>seconds</option>
									<option value="ms">milliseconds</option>
								</select>
							</label>
						</div>
						<div class="panel__row">
							<button type="button" class="btn" id="btn-convert-unix">Convert</button>
							<button type="button" class="btn btn--ghost" id="btn-now-unix">Use now</button>
						</div>
						<div class="panel__row">
							<output class="result" id="out-unix-result"></output>
						</div>
					</div>

					<div class="panel__subsection">
						<h3 class="panel__subtitle">Normal time (+ UTC offset) → decimal</h3>
						<div class="panel__row panel__row--grid">
							<label class="field">
								<span class="field__label">Date</span>
								<input class="field__input" id="in-date" type="date">
							</label>
							<label class="field">
								<span class="field__label">Time</span>
								<input class="field__input" id="in-time" inputmode="numeric" autocomplete="off" placeholder="HH:MM or HH:MM:SS">
							</label>
						</div>
						<div class="panel__row panel__row--grid">
							<label class="field">
								<span class="field__label">UTC offset</span>
								<select class="field__input" id="sel-offset"></select>
							</label>
							<div class="field field--readonly">
								<span class="field__label">Decimal</span>
								<output class="field__output" id="out-normal-decimal">—</output>
							</div>
						</div>
						<div class="panel__row">
							<button type="button" class="btn" id="btn-convert-normal">Convert</button>
							<button type="button" class="btn btn--ghost" id="btn-now-normal">Use now (local)</button>
						</div>
						<div class="panel__row">
							<output class="result" id="out-normal-result"></output>
						</div>
					</div>
				</div>
			</section>
		</main>

		<dialog class="modal" id="dlg-about" aria-label="About NUMPTi">
			<div class="modal__head">
				<div class="modal__title">How it works</div>
				<form method="dialog">
					<button type="submit" class="btn btn--ghost btn--small" aria-label="Close">Close</button>
				</form>
			</div>
			<div class="modal__body">
				<p><strong>NUMPTi</strong> uses a 96-hour day with fixed-length hours and a small overlap window at each hour boundary to avoid a single “hard” tick.</p>

				<h3>Core time units</h3>
				<ul>
					<li><strong>Day</strong>: 86,400 seconds (unchanged)</li>
					<li><strong>Hour</strong>: 900 seconds (96 hours per day, labelled 00–95)</li>
					<li><strong>Minute</strong>: 100 seconds</li>
					<li><strong>Second</strong>: 0–99 within the minute</li>
				</ul>

				<h3>Minutes 0–8 + overlap minute 9</h3>
				<p>Each 900-second hour contains <strong>9 normal minutes</strong> (labelled <strong>0–8</strong>). The first 100 seconds of each hour can also be labelled as the <strong>previous hour’s minute 9</strong>.</p>
				<ul>
					<li><strong>Primary label</strong> during that window: current hour, minute <strong>0</strong></li>
					<li><strong>Alternate label</strong>: previous hour, minute <strong>9</strong></li>
					<li>The <strong>◐</strong> symbol indicates you are looking at an overlap/alternate reading.</li>
				</ul>

				<h3>Formats</h3>
				<ul>
					<li><strong>Brackets</strong>: <code>HH(M)SS</code> e.g. <code>74(8)01</code></li>
					<li><strong>Colon</strong>: <code>HH:M:SS</code> (minute is single digit)</li>
				</ul>

				<h3>Date</h3>
				<p>The date line uses <strong>10-day weeks</strong> in UTC, shown as <code>YYYY(WW.D)</code> where <strong>WW</strong> is a zero-indexed week number and <strong>D</strong> is a zero-indexed day within the 10-day week.</p>
				<p>Example: <code>2025(35.6)</code>.</p>

				<h3>UTC, converters, and privacy</h3>
				<ul>
					<li>The main clock is global and based on <strong>UTC</strong>.</li>
					<li>Converters accept Unix time and wall time with a fixed UTC offset.</li>
					<li>Location is only used if you press <strong>Use my location</strong>. Settings are stored in your browser via <strong>localStorage</strong>.</li>
				</ul>
			</div>
		</dialog>

		<script type="module" src="./src/main.js"></script>
	</body>
</html>


